<!DOCTYPE html>
<meta name='viewport' content='width=device-width, initial-scale=1'/>
<html>
<head>
<title> Average Calculator</title>

<!-- Start your code here -->
 
  <style>
    
    body {
      background: #757575;
     padding-right: 4px;
      }
  .table {
    position:absolute;
    top: 60%;
  }
.perameter{
       display: flex;
       width: 100%; 
       margin: 5px;
       padding:2px;
       font-size: 18px;
	   justify-content: flex-end;
	  }
  .row {
    
    display: flex;
    width: 100%; 
    margin: 5px;
    padding:2px;
    font-size: 10px;
  }

  .row1 {
    justify-content: flex-start; /* বামে থাকবে */
  }

  .row2 {
    
    justify-content: flex-end;   /* ডানে থাকবে */
  }

  .row3 {
    justify-content: flex-end;   /* ডানে থাকবে */
  }

  .cell {
    background: #9e9e9e ;
    width: 20%;
    height: 50px;
    border: 1px solid #000;
    text-align: center;
    line-height: 40px; 
    font-size: 22px;
  }
   .pcell {
    ackground: #9e9e9e ;
    width: 20%;
    height: 10px;
    order: 1px solid #000;
    text-align: center;
    line-height: 20px;
    font-size: 24px;
  }
 .display {
   position:relative ;
   }
 span {
   font-size:18px;
   position:absolute;
   }
 .unit{
    background: #9e9e9e ;
    width: 35%;
    eight: 50px;
    border: 1px solid #000;
    text-align: center;
    line-height: 40px; 
    font-size: 22px;
  }
  .about{
    font-size: 24px;
  }
    
</style>





	
  <script>

// ------------------------------
// Restore Cached Data on Load
// ------------------------------
window.onload = function () {

    // Restore unit
    let savedUnit = localStorage.getItem("unit_value");
    if (savedUnit) {
        document.getElementById("unit").value = savedUnit;
    }

    // Restore input numbers
    for (let i = 1; i <= 5; i++) {
        let val = localStorage.getItem("nmbr" + i);
        if (val !== null) {
            document.getElementById("nmbr" + i).value = val;
        }
    }

    // Restore previous results if needed
    let savedAvg = localStorage.getItem("rslt");
    let savedGpy = localStorage.getItem("gpy");
    let savedCv = localStorage.getItem("cv");

    if (savedAvg) document.getElementById("rslt").innerText = savedAvg;
    if (savedGpy) document.getElementById("gpy").innerText = savedGpy;
    if (savedCv) document.getElementById("cv").innerText = savedCv;
};

// ------------------------------
// Save Unit when Changed
// ------------------------------
document.getElementById("unit").addEventListener("change", function () {
    localStorage.setItem("unit_value", this.value);
});

// ------------------------------
// Save Input Values Automatically
// ------------------------------
for (let i = 1; i <= 5; i++) {
    document.getElementById("nmbr" + i).addEventListener("input", function () {
        localStorage.setItem("nmbr" + i, this.value);
    });
}


// ------------------------------
// Average Calculation
// ------------------------------
function avg() {
    let Number1 = Number(document.getElementById("nmbr1").value);
    let Number2 = Number(document.getElementById("nmbr2").value);
    let Number3 = Number(document.getElementById("nmbr3").value);
    let Number4 = Number(document.getElementById("nmbr4").value);
    let Number5 = Number(document.getElementById("nmbr5").value);

    let numbers = [Number1, Number2, Number3, Number4, Number5];

    let sum = numbers.reduce((a, b) => a + b, 0);
    let Average = sum / numbers.length;

    document.getElementById("rslt").innerText = Average.toFixed(2);
    localStorage.setItem("rslt", Average.toFixed(2)); // cache save


    // GPY Calculation
    let value = document.getElementById("unit").value;

    if (value === "grain") {
        let Gpy = Average / 6;
        document.getElementById("gpy").innerText = Gpy.toFixed(2);
        localStorage.setItem("gpy", Gpy.toFixed(2));
    } else {
        let Gpy = Average * 2.5720666667;
        document.getElementById("gpy").innerText = Gpy.toFixed(2);
        localStorage.setItem("gpy", Gpy.toFixed(2));
    }

    // Standard Deviation
    let squareDiffs = numbers.map(n => Math.pow(n - Average, 2));
    let variance = squareDiffs.reduce((a, b) => a + b, 0) / numbers.length;
    let stdDev = Math.sqrt(variance);

    // CV%
    let cv = (stdDev / Average) * 100;

    document.getElementById("cv").innerText = cv.toFixed(2) + "%";
    localStorage.setItem("cv", cv.toFixed(2) + "%");
}


// ------------------------------
// RESET FUNCTION
// ------------------------------
function allreset() {

    // clear inputs
    for (let i = 1; i <= 5; i++) {
        document.getElementById("nmbr" + i).value = "";
        localStorage.removeItem("nmbr" + i);
    }

    // clear outputs
    document.getElementById("rslt").innerText = "";
    document.getElementById("gpy").innerText = "";
    document.getElementById("cv").innerText = "";

    localStorage.removeItem("rslt");
    localStorage.removeItem("gpy");
    localStorage.removeItem("cv");
}

</script>
  




	
  </head>
 
<body>
 <span class="about">
 QAD Average Calculator <br>
 Special for Hanif Spinning Mills Ltd. <br>
 Created by Akash </span>

 
  <div class="table">

<div class="unit">
<label for="unit" tyle="font-size:22px; position:absolute; top: 50%"> Units : </label>
  <select id="unit" name="unit" style="width:80px; height:40px;">
    <option value="gram" style="height: 50px; border:1px solid #000; text-align:center;  line-height:40px;  font-size: 22px;"> Gram </option>
    <option value="grain"> Grain </option>
  </select>
  </div>

	  
  <div class="row row1">
    <input type="number" class="cell" id="nmbr1">
    <input type="number" class="cell" id="nmbr2">
    <input type="number" class="cell" id="nmbr3">
    <input type="number" class="cell" id="nmbr4">
    <input type="number" class="cell" id="nmbr5">
  </div>


    <div class="perameter">
    <div type="number" class="pcell" d="rslt"> <span> Avg </span> </div> 
    <div type="number" class="pcell" d="gpy"> <span> GPY </span> </div>
    <div type="number" class="pcell" d="cv"> <span> CV% </span></div> 
    </div>
  <div class="row row2">
    <div type="number" class="cell display" id="rslt"></div>
    <div type="number" class="cell display" id="gpy"></div>
    <div type="number" class="cell display" id="cv"></div>
  </div>
  
  <div class="row row3">
    <button class="cell" onclick="allreset()"> Reset </button>
    <button class="cell" id="result" onclick="avg()"> = </button>
  </div>
  
<!-- End your code here -->
    1. Select unit <br>
	2. Input your tested value in the box <br> 
	3. Press enter of your keyboard to input next value  <br>
	4. Press '=' to see result  <br>
	5. Press 'Reset' to delete everything 
    
    </div>
</body>
</html>
